(function(){String.prototype.a||(String.prototype.a=function(c,d){return this.replace(new RegExp(c,"g"),d)});
function u(c){function d(){var n=0<h.length?h.substr(1,h.length-1):"";f||a();if(!f)return n+"\u205f";for(;n.length<q;){var b=q-n.length;if(f.getLength()<=r){a();if(!f)return n+"\u205f";f.getLength()}b=f.getTextRange(r,b);r+=b.length;n+=b}return n}function a(){for(var a,b=0,c=k.length;b<c;){if(0>p||p>=k.length)p=0;var d=k[p];if(!d.updateTimeout((new Date).getTime())&&t){a=d;break}b++}r=0;return f=a}function g(a){a=a.movingTextItem;var b=k.indexOf(a);0>b||(b<=p&&(p--,f==a&&(f=null)),k.splice(b,1),l.dispatchEvent({type:"removed",
movingTextItem:a}))}function e(){for(var a=0;a<q;a++)h+="\u205f"}function b(a){l.dispatchEvent({type:"displaystring",str:a})}window.EventEnabledBuilder(this);var l=this,m=c["default"],h=m?m:"",q=c.approximateLength;c=new v({movingText:l,extraTicksBeforeStop:q});c.onTick=function(){var a=d();h=a;b(a)};c.onStopped=function(){console.log("onTimerStopped");console.log(m);m&&(h=m,e(),b(h))};var k=[],f,r=0;e();c=window.VisibilityWatcher;setTimeout(function(){b(h)},0);var p=0,t=!0;this.append=function(a){0<=
k.indexOf(a)||(k.push(a),a.addEventListener("dispose",g),l.dispatchEvent({type:"added",movingTextItem:a}))};this.count=function(){return k.length};c.addEventListener("visibilitychange",function(a){console.log(a);console.log(a.visible);t=a.visible})}
function v(c){var d=this,a=c.movingText,g=c.extraTicksBeforeStop,e=!0,b=new window.Timer({delay:1E3/9,callback:function(){var a=d.onTick;l&&0>=m--?(b.stop(),(a=d.onStopped)&&a()):a&&a()}});a.addEventListener("removed",function(){e||0<a.count()||(e=!0,m=g,l=!0)});a.addEventListener("added",function(){e&&(b.start(),l=e=!1)});var l=!1,m=g}
var x=window.MovingTextItem=function(c){window.EventEnabledBuilder(this);var d=this,a=c.text,g=c.lifecycle;g||(g=new w["default"]);(function(){for(var b;" "==(b=a.substr(a.length-1,1))||"\u2063"==b;)a=a.substr(0,a.length-1);a+="\u205f\u205f\u205f";a=a.a(" ","\u205f")})();var e=!1;this.getText=function(b){return b<=a.length?a:a.substr(0,a.length)};this.getTextRange=function(b,c){return c+b<=a.length?a.substr(b,c):a.substr(b,a.length-b)};this.getLength=function(){return a.length};this.updateTimeout=
function(a){g.setVisible();(a=g.updateTimeout(a))&&d.dispose();return a};this.dispose=function(){e||(e=!0,d.dispatchEvent({type:"dispose",movingTextItem:d}))};this.getDisposed=function(){return e}},w=window.MovingTextLifecycle=function(){function c(c){var a=c.fromVisible,d=c.duration,e,b;!a&&d&&(b=(new Date).getTime()+d);this.getVisible=function(){return e?!0:!1};this.setVisible=function(){e||(e=(new Date).getTime(),console.log(e),a&&d&&(b=e+d))};this.getTimeoutAt=function(){return b};this.updateTimeout=
function(a){if(b)return a>=b}}c["default"]=function(){return new c({fromVisible:!0,duration:1E4})};return c}();window.Title=function(c){window.EventEnabledBuilder(this);var d=new u({approximateLength:70,"default":c["default"]});this.add=function(a){"string"==typeof a?(a=new x({text:a}),d.append(a)):d.append(a)};d.addEventListener("displaystring",function(a){document.title="\u2063"+a.str})};})();