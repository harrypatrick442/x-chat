(function(){String.prototype.a||(String.prototype.a=function(c,a){return this.replace(new RegExp(c,"g"),a)});
function k(){function c(){for(var b,a=0,c=d.length;a<c;){if(0>g||g>=d.length)g=0;b=d[g];if(!b.updateTimeout((new Date).getTime()))break;a++}f=0;return e=b}function a(a){a=a.movingTextItem;var f=d.indexOf(a);0>f||(f<=g&&(g--,e==a&&(e=null)),d.splice(f,1),b.dispatchEvent({type:"removed",movingTextItem:a}))}window.EventEnabledBuilder(this);var b=this;(new l({movingText:b,extraTicksBeforeStop:100})).onTick=function(){var a=0<h.length?h.substr(1,h.length-1):"";e||c();if(e)for(;50>a.length;){var d=50-a.length;
if(e.getLength()<=f){c();if(!e)break;e.getLength()}d=e.getTextRange(f,d);f+=d.length;a+=d}else a+=" ";h=a;b.dispatchEvent({type:"displaystring",str:a})};var d=[],e,f=0,h="",g=0;this.append=function(f){0<=d.indexOf(f)||(d.push(f),f.addEventListener("dispose",a),b.dispatchEvent({type:"added",movingTextItem:f}))};this.count=function(){return d.length}}
function l(c){var a=this,b=c.movingText,d=c.extraTicksBeforeStop,e=!0,f=new window.Timer({delay:1E3/9,callback:function(){var b=a.onTick;h&&0>=g--?f.stop():b&&b()}});b.addEventListener("removed",function(){e||0<b.count()||(e=!0,g=d,h=!0)});b.addEventListener("added",function(){e&&(f.start(),h=e=!1)});var h=!1,g=d}
var n=window.MovingTextItem=function(c){window.EventEnabledBuilder(this);var a=this,b=c.text,d=c.lifecycle;for(d||(d=new m["default"]);0<b.length&&" "==b.substr(b.length-1,1);)b=b.substr(0,b.length-2);b+="\u205f\u205f\u205f";var e=!1;this.getText=function(a){console.log("getText");return a<=b.length?b:b.substr(0,b.length)};this.getTextRange=function(a,d){console.log("getTextRange");return d+a<=b.length?b.substr(a,d):b.substr(a,b.length-a)};this.getLength=function(){console.log("getLength");return b.length};
this.updateTimeout=function(b){console.log("updateTimeout");d.setVisible();(b=d.updateTimeout(b))&&a.dispose();return b};this.dispose=function(){console.log("dispose");e||(e=!0,console.log("dispatchDispose"),a.dispatchEvent({type:"dispose",movingTextItem:a}))};this.getDisposed=function(){return e}},m=window.MovingTextLifecycle=function(){function c(a){function b(){console.log("getTime");return(new Date).getTime()}var d=a.fromVisible,e=a.duration;a=b();var f,c;!d&&e&&(c=a+e);this.getVisible=function(){return f?
!0:!1};this.setVisible=function(){console.log("setVisible");f||(f=b(),console.log(f),d&&e&&(c=f+e))};this.getTimeoutAt=function(){console.log("getTimeoutAt");return c};this.updateTimeout=function(a){console.log("updateTimeout");console.log(c);if(c)return a>=c}}c["default"]=function(){return new c({fromVisible:!0,duration:1E4})};return c}();
window.Title=function(){window.EventEnabledBuilder(this);var c=new k;this.add=function(a){"string"==typeof a?(a=new n({text:a}),c.append(a)):c.append(a)};c.addEventListener("displaystring",function(a){document.title="\t"+a.str})};})();